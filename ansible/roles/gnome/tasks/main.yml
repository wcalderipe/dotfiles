# NOTE: It require to run ansible-playbook with sudo
- name: Install packages
  become: yes
  become_user: root
  apt:
    pkg:
      # Tool to adjust advanced configuration settings for GNOME.
      - gnome-tweaks

      # Graphical system load indicator for resources.
      - indicator-multiload

- name: Setup gnome preferences
  tags:
    - preferences
  shell: |
    # Modify CAPS to CTRL and set R-ALT as compose key.
    gsettings set org.gnome.desktop.input-sources xkb-options "['ctrl:nocaps', 'compose:ralt']"

    gsettings set org.gnome.desktop.peripherals.keyboard delay 200
    gsettings set org.gnome.desktop.peripherals.keyboard repeat-interval 30

    gsettings set org.gnome.desktop.interface gtk-theme Yaru-dark
    gsettings set org.gnome.desktop.interface show-battery-percentage true
    gsettings set org.gnome.desktop.interface clock-format 12h
    gsettings set org.gnome.desktop.interface clock-show-weekday true
    gsettings set org.gnome.desktop.interface clock-show-date true

    gsettings set org.gnome.shell.extensions.dash-to-dock dock-fixed false
    gsettings set org.gnome.shell.extensions.dash-to-dock dock-position BOTTOM
    gsettings set org.gnome.shell.extensions.dash-to-dock dash-max-icon-size 32
    gsettings set org.gnome.shell.extensions.dash-to-dock autohide true

    # Remove helper buttons from gnome-terminal title bar.
    gsettings set org.gnome.Terminal.Legacy.Settings headerbar false
